<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>observer Demo</title>
</head>
<body>
    <button id="addNewObserver">Add New Observer checkbox</button>
    <input type="checkbox" id="mainCheckbox">
    <div id="observersContainer"></div>
    <script src="observer.js"></script>
    <script>
        function extend(obj, extension) {
            for (var key in extension) {
                obj[key] = extension[key];
            }
        }

        var controlCheckbox = document.getElementById('mainCheckbox');
        var addBtn = document.getElementById('addNewObserver');
        var container = document.getElementById('observersContainer');

        extend(controlCheckbox, new Subject());

        controlCheckbox.onclick = function () {
            controlCheckbox.notify(controlCheckbox.checked);
        };

        addBtn.onclick = addNewObserver;

        function addNewObserver() {
            var check = document.createElement('input');
            check.type = 'checkbox';

            extend(check, new Observer());

            check.update = function (value) {
                this.checked = value;
            };

            controlCheckbox.addObserver(check);
            container.appendChild(check);
        }
    </script>
</body>
</html>



















